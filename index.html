<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ø¹Ø§Øª ÙÙŠ Ø±Ù…Ø¶Ø§Ù†</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #C9A84C;
    --gold-light: #E8CC7E;
    --green-dark: #1B4332;
    --green: #2D6A4F;
    --green-light: #52B788;
    --cream: #FDF8EE;
    --white: #FFFFFF;
    --shadow: rgba(27, 67, 50, 0.15);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Cairo', sans-serif;
    background: var(--cream);
    min-height: 100vh;
    direction: rtl;
  }

  /* Decorative background */
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: 
      radial-gradient(ellipse at 20% 10%, rgba(201,168,76,0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 90%, rgba(45,106,79,0.08) 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

  /* ===== TOP BAR ===== */
  .top-bar {
    background: linear-gradient(135deg, var(--green-dark) 0%, var(--green) 100%);
    padding: 12px 24px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    flex-wrap: wrap;
    position: relative;
    z-index: 10;
    box-shadow: 0 4px 20px rgba(27,67,50,0.3);
  }

  .top-bar-title {
    font-family: 'Amiri', serif;
    color: var(--gold-light);
    font-size: 1.3rem;
    font-weight: 700;
  }

  .btn-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-family: 'Cairo', sans-serif;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.2s;
  }

  .btn-print {
    background: var(--gold);
    color: var(--green-dark);
  }
  .btn-print:hover { background: var(--gold-light); transform: translateY(-1px); }

  .btn-pdf {
    background: rgba(255,255,255,0.15);
    color: white;
    border: 1px solid rgba(255,255,255,0.3);
  }
  .btn-pdf:hover { background: rgba(255,255,255,0.25); transform: translateY(-1px); }

  .btn-sound {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 1px solid rgba(255,255,255,0.2);
    font-size: 1rem;
    padding: 8px 12px;
  }
  .btn-sound:hover { background: rgba(255,255,255,0.2); }
  .btn-sound.muted { opacity: 0.5; }

  /* Visitor counter */
  .visitor-badge {
    display: flex;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 999px;
    padding: 6px 14px;
    color: white;
    font-size: 0.82rem;
    font-weight: 600;
  }
  .visitor-badge .vnum {
    color: var(--gold-light);
    font-size: 1rem;
    font-weight: 900;
  }

  /* Share modal */
  .modal-overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.55);
    z-index: 2000;
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.open { display: flex; }
  .modal-box {
    background: white;
    border-radius: 20px;
    padding: 30px;
    max-width: 380px;
    width: 90%;
    text-align: center;
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    animation: popIn 0.3s cubic-bezier(.34,1.56,.64,1) both;
    direction: rtl;
  }
  @keyframes popIn {
    from { opacity: 0; transform: scale(0.85); }
    to { opacity: 1; transform: scale(1); }
  }
  .modal-title {
    font-family: 'Amiri', serif;
    font-size: 1.4rem;
    color: var(--green-dark);
    margin-bottom: 6px;
  }
  .modal-sub { color: #888; font-size: 0.82rem; margin-bottom: 20px; }
  .share-link-box {
    display: flex;
    gap: 8px;
    background: #f5f5f5;
    border-radius: 10px;
    padding: 10px 12px;
    margin-bottom: 18px;
    align-items: center;
  }
  .share-link-box input {
    flex: 1;
    border: none;
    background: transparent;
    font-family: 'Cairo', sans-serif;
    font-size: 0.78rem;
    color: #333;
    outline: none;
    text-align: right;
    direction: rtl;
  }
  .share-link-box button {
    background: var(--green);
    color: white;
    border: none;
    border-radius: 7px;
    padding: 5px 12px;
    cursor: pointer;
    font-family: 'Cairo', sans-serif;
    font-size: 0.8rem;
    font-weight: 600;
    white-space: nowrap;
  }
  .share-link-box button:hover { background: var(--green-dark); }
  .share-platforms {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: wrap;
    margin-bottom: 16px;
  }
  .share-platform-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 10px 16px;
    border-radius: 12px;
    border: 1px solid #eee;
    cursor: pointer;
    font-size: 0.72rem;
    font-family: 'Cairo', sans-serif;
    font-weight: 600;
    color: #444;
    background: #fafafa;
    transition: all 0.15s;
    text-decoration: none;
  }
  .share-platform-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
  .share-platform-btn .sp-icon { font-size: 1.5rem; }
  .modal-close {
    background: none;
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 7px 20px;
    cursor: pointer;
    font-family: 'Cairo', sans-serif;
    font-size: 0.85rem;
    color: #666;
  }
  .modal-close:hover { background: #f0f0f0; }

  /* ===== SHAHEED BANNER ===== */
  .shaheed-banner {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    border-bottom: 3px solid var(--gold);
    padding: 20px 30px;
    text-align: center;
    position: relative;
    overflow: hidden;
    z-index: 5;
  }

  .shaheed-banner::before {
    content: 'ğŸŒ™';
    position: absolute;
    font-size: 80px;
    opacity: 0.05;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
  }
  .shaheed-banner::after {
    content: 'â­';
    position: absolute;
    font-size: 80px;
    opacity: 0.05;
    right: 20px;
    top: 50%;
    transform: translateY(-50%);
  }

  .shaheed-text {
    font-family: 'Amiri', serif;
    color: var(--gold-light);
    font-size: 1.5rem;
    line-height: 2;
    animation: pulse-gold 3s ease-in-out infinite;
    text-shadow: 0 0 20px rgba(201,168,76,0.4);
  }

  .shaheed-name {
    font-size: 1.9rem;
    font-weight: 700;
    display: block;
    margin-top: 4px;
  }

  .shaheed-sub {
    color: rgba(255,255,255,0.6);
    font-size: 0.85rem;
    font-family: 'Cairo', sans-serif;
    margin-top: 6px;
  }

  @keyframes pulse-gold {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
  }

  /* ===== MAIN CONTENT ===== */
  .main-content {
    position: relative;
    z-index: 1;
    padding: 20px;
    max-width: 1100px;
    margin: 0 auto;
  }

  /* ===== PAGE HEADER ===== */
  .page-header {
    text-align: center;
    margin: 20px 0 16px;
    animation: fadeDown 0.6s ease both;
  }

  .page-header h1 {
    font-family: 'Amiri', serif;
    color: var(--green-dark);
    font-size: 2rem;
    margin-bottom: 4px;
  }

  .page-header p {
    color: var(--green);
    font-size: 0.9rem;
  }

  .header-divider {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 10px 0;
    justify-content: center;
  }
  .header-divider::before, .header-divider::after {
    content: '';
    flex: 1;
    max-width: 120px;
    height: 1px;
    background: linear-gradient(to right, transparent, var(--gold));
  }
  .header-divider::after {
    background: linear-gradient(to left, transparent, var(--gold));
  }
  .header-divider span { color: var(--gold); font-size: 1.2rem; }

  /* ===== PROGRESS STATS ===== */
  .stats-bar {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
    flex-wrap: wrap;
    animation: fadeUp 0.6s ease 0.2s both;
  }

  .stat-card {
    background: white;
    border-radius: 12px;
    padding: 12px 20px;
    flex: 1;
    min-width: 120px;
    text-align: center;
    box-shadow: 0 2px 12px var(--shadow);
    border-top: 3px solid var(--green-light);
  }

  .stat-num {
    font-size: 1.8rem;
    font-weight: 900;
    color: var(--green-dark);
    line-height: 1;
  }

  .stat-label {
    font-size: 0.75rem;
    color: #666;
    margin-top: 2px;
  }

  /* ===== TABLE ===== */
  .table-container {
    background: white;
    border-radius: 16px;
    box-shadow: 0 8px 40px var(--shadow);
    overflow: hidden;
    animation: fadeUp 0.6s ease 0.3s both;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.78rem;
  }

  thead tr {
    background: linear-gradient(135deg, var(--green-dark) 0%, var(--green) 100%);
    color: white;
  }

  th {
    padding: 10px 6px;
    text-align: center;
    font-weight: 600;
    font-size: 0.75rem;
    border-left: 1px solid rgba(255,255,255,0.1);
  }

  th:first-child { border-left: none; }

  th .icon { font-size: 1.2rem; display: block; margin-bottom: 2px; }

  /* Date column */
  .col-date { 
    background: rgba(255,255,255,0.1); 
    font-weight: 700;
    min-width: 36px;
  }

  tbody tr {
    border-bottom: 1px solid #f0f0f0;
    transition: background 0.15s;
  }

  tbody tr:hover { background: rgba(45,106,79,0.04); }

  /* Section headers */
  .section-row td {
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
    color: var(--green-dark);
    font-weight: 900;
    text-align: center;
    padding: 6px;
    font-size: 0.8rem;
    letter-spacing: 0.05em;
  }

  /* Days in section colors */
  .mercy-row { background: rgba(82,183,136,0.06); }
  .forgiveness-row { background: rgba(201,168,76,0.06); }
  .freedom-row { background: rgba(255,100,100,0.04); }

  td {
    padding: 6px 4px;
    text-align: center;
    vertical-align: middle;
  }

  .day-num {
    font-weight: 700;
    color: var(--green-dark);
    font-size: 0.8rem;
  }

  /* Checkbox styling */
  .check-cell input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
    accent-color: var(--green);
    border-radius: 4px;
  }

  /* Progress bar in table */
  .day-progress {
    width: 100%;
    height: 3px;
    background: #eee;
    border-radius: 99px;
    overflow: hidden;
  }
  .day-progress-fill {
    height: 100%;
    background: linear-gradient(to left, var(--green-light), var(--green));
    border-radius: 99px;
    transition: width 0.3s;
  }

  /* ===== FOOTER ===== */
  .footer {
    text-align: center;
    padding: 20px;
    color: #999;
    font-size: 0.8rem;
    margin-top: 10px;
  }

  /* ===== ANIMATIONS ===== */
  @keyframes fadeDown {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* ===== SPLASH SCREEN ===== */
  .splash {
    position: fixed;
    inset: 0;
    background: linear-gradient(135deg, #0f1f14 0%, #1B4332 50%, #0d2b1e 100%);
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    gap: 16px;
    transition: opacity 0.7s ease, visibility 0.7s ease;
  }
  .splash.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
  .splash-moon { font-size: 5rem; animation: moonPulse 2s ease-in-out infinite; }
  @keyframes moonPulse {
    0%,100% { transform: scale(1); filter: drop-shadow(0 0 20px rgba(201,168,76,0.4)); }
    50% { transform: scale(1.08); filter: drop-shadow(0 0 40px rgba(201,168,76,0.8)); }
  }
  .splash-title {
    font-family: 'Amiri', serif;
    color: var(--gold-light);
    font-size: 2rem;
    text-shadow: 0 0 30px rgba(201,168,76,0.5);
  }
  .splash-sub { color: rgba(255,255,255,0.6); font-size: 0.9rem; font-family: 'Cairo', sans-serif; }
  .splash-btn {
    margin-top: 12px;
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%);
    color: var(--green-dark);
    border: none;
    border-radius: 999px;
    padding: 14px 48px;
    font-family: 'Cairo', sans-serif;
    font-size: 1.1rem;
    font-weight: 900;
    cursor: pointer;
    box-shadow: 0 8px 30px rgba(201,168,76,0.4);
    transition: transform 0.2s, box-shadow 0.2s;
    animation: btnPulse 2s ease-in-out infinite;
  }
  .splash-btn:hover { transform: scale(1.05); box-shadow: 0 12px 40px rgba(201,168,76,0.6); }
  @keyframes btnPulse {
    0%,100% { box-shadow: 0 8px 30px rgba(201,168,76,0.4); }
    50% { box-shadow: 0 8px 50px rgba(201,168,76,0.7); }
  }
  .splash-stars { position: absolute; inset: 0; overflow: hidden; pointer-events: none; }
  .splash-stars span {
    position: absolute;
    color: rgba(201,168,76,0.4);
    animation: twinkle var(--d) ease-in-out infinite;
  }
  @keyframes twinkle {
    0%,100% { opacity: 0.2; transform: scale(1); }
    50% { opacity: 0.9; transform: scale(1.4); }
  }

  /* ===== PRINT STYLES ===== */
  @media print {
    .top-bar, .btn-group, .stats-bar, .footer, .toast, .modal-overlay { display: none !important; }
    .shaheed-banner { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    body { background: white; }
    .table-container { box-shadow: none; border: 1px solid #ccc; }
    thead tr { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    .section-row td { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    @page { size: A4 landscape; margin: 1cm; }
  }

  /* Toast notification */
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--green-dark);
    color: white;
    padding: 10px 24px;
    border-radius: 999px;
    font-size: 0.85rem;
    z-index: 1000;
    transition: transform 0.3s ease;
    white-space: nowrap;
  }
  .toast.show { transform: translateX(-50%) translateY(0); }

  /* Completion celebration */
  .fully-done {
    background: linear-gradient(135deg, var(--gold) 0%, var(--gold-light) 100%) !important;
  }

  /* ===== MOBILE RESPONSIVE ===== */
  @media (max-width: 768px) {

    /* Top bar: stack title + buttons */
    .top-bar {
      flex-direction: column;
      align-items: flex-start;
      padding: 10px 14px;
      gap: 8px;
    }
    .top-bar-title { font-size: 1rem; }
    .btn-group { gap: 6px; width: 100%; }
    .btn { padding: 7px 10px; font-size: 0.75rem; flex: 1; justify-content: center; }
    .visitor-badge { font-size: 0.75rem; padding: 5px 10px; }

    /* Shaheed banner */
    .shaheed-banner { padding: 14px 16px; }
    .shaheed-text { font-size: 1.1rem; }
    .shaheed-name { font-size: 1.3rem; }
    .shaheed-sub { font-size: 0.75rem; }

    /* Main content */
    .main-content { padding: 10px; }
    .page-header h1 { font-size: 1.2rem; }

    /* Stats cards: 2x2 grid */
    .stats-bar { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
    .stat-card { padding: 10px; min-width: unset; }
    .stat-num { font-size: 1.4rem; }
    .stat-label { font-size: 0.68rem; }

    /* Table: make it horizontally scrollable */
    .table-container {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      border-radius: 12px;
    }

    table { font-size: 0.65rem; min-width: 700px; }

    th { padding: 7px 3px; font-size: 0.62rem; }
    th .icon { font-size: 0.95rem; }

    td { padding: 4px 2px; }
    .day-num { font-size: 0.7rem; }

    .check-cell input[type="checkbox"] {
      width: 15px;
      height: 15px;
    }

    /* Section rows */
    .section-row td { font-size: 0.72rem; padding: 5px; }

    /* Toast */
    .toast { font-size: 0.75rem; padding: 8px 16px; white-space: normal; text-align: center; max-width: 85vw; }

    /* Splash screen */
    .splash-title { font-size: 1.5rem; }
    .splash-moon { font-size: 3.5rem; }
    .splash-btn { padding: 12px 36px; font-size: 1rem; }

    /* Share modal */
    .modal-box { padding: 20px 16px; }
    .share-platforms { gap: 6px; }
    .share-platform-btn { padding: 8px 10px; font-size: 0.68rem; }
    .sp-icon { font-size: 1.2rem; }
  }

  @media (max-width: 400px) {
    table { min-width: 620px; }
    th .icon { display: none; }
    th { font-size: 0.58rem; padding: 6px 2px; }
  }
</style>
</head>
<body>

<!-- Auto-playing audio -->
<audio id="bgSound" loop>
  <source src="sound1.mp3" type="audio/mpeg">
</audio>

<!-- TOP BAR -->
<div class="top-bar">
  <div class="top-bar-title">ğŸŒ™ Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ø¹Ø§Øª - Ø±Ù…Ø¶Ø§Ù†</div>
  <div class="btn-group">
    <div class="visitor-badge" title="Ø¹Ø¯Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙŠ Ø§Ù„Ù…ÙˆÙ‚Ø¹">
      ğŸ‘¥ <span class="vnum" id="visitorCount">...</span> Ù…Ø³ØªØ®Ø¯Ù…
    </div>
    <button class="btn btn-pdf" onclick="openShare()" style="background:rgba(255,255,255,0.15);">
      ğŸ”— Ù…Ø´Ø§Ø±ÙƒØ©
    </button>
    <button class="btn btn-sound" id="soundBtn" onclick="toggleSound()" title="ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØµÙˆØª">
      ğŸ”Š
    </button>
    <button class="btn btn-print" onclick="window.print()">
      ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©
    </button>
    <button class="btn btn-pdf" onclick="downloadPDF()">
      ğŸ“¥ ØªØ­Ù…ÙŠÙ„ PDF
    </button>
    <button class="btn btn-pdf" onclick="resetAll()" style="background:rgba(255,100,100,0.2); border-color:rgba(255,100,100,0.4);">
      ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
    </button>
  </div>
</div>

<!-- SHARE MODAL -->
<div class="modal-overlay" id="shareModal" onclick="closeShareOutside(event)">
  <div class="modal-box">
    <div class="modal-title">ğŸŒ™ Ø´Ø§Ø±Ùƒ Ø§Ù„Ø¬Ø¯ÙˆÙ„</div>
    <div class="modal-sub">Ø´Ø§Ø±Ùƒ Ø¬Ø¯ÙˆÙ„ Ø±Ù…Ø¶Ø§Ù† Ù…Ø¹ Ø£Ù‡Ù„Ùƒ ÙˆØ£ØµØ­Ø§Ø¨Ùƒ</div>
    <div class="share-link-box">
      <input type="text" id="shareUrl" readonly>
      <button onclick="copyLink()">Ù†Ø³Ø®</button>
    </div>
    <div class="share-platforms">
      <a class="share-platform-btn" id="waShare" target="_blank">
        <span class="sp-icon">ğŸ’¬</span>ÙˆØ§ØªØ³Ø§Ø¨
      </a>
      <a class="share-platform-btn" id="fbShare" target="_blank">
        <span class="sp-icon">ğŸ“˜</span>ÙÙŠØ³Ø¨ÙˆÙƒ
      </a>
      <a class="share-platform-btn" id="twShare" target="_blank">
        <span class="sp-icon">ğŸ¦</span>ØªÙˆÙŠØªØ±
      </a>
      <a class="share-platform-btn" id="tgShare" target="_blank">
        <span class="sp-icon">âœˆï¸</span>ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
      </a>
    </div>
    <button class="modal-close" onclick="closeShare()">Ø¥ØºÙ„Ø§Ù‚</button>
  </div>
</div>

<!-- SHAHEED BANNER -->
<div class="shaheed-banner">
  <div class="shaheed-text">
    Ù†Ø±Ø¬Ùˆ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„Ø£Ø®ÙˆÙƒÙ… Ø§Ù„Ø´Ù‡ÙŠØ¯
    <span class="shaheed-name">âœ¦ ÙŠÙˆØ³Ù Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯ âœ¦</span>
  </div>
  <div class="shaheed-sub">Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„Ù‡ Ù…Ù† Ø§Ù„Ø´Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ø°ÙŠÙ† Ø£Ù†Ø¹Ù…Øª Ø¹Ù„ÙŠÙ‡Ù… â€¢ Ø¢Ù…ÙŠÙ†</div>
</div>

<!-- MAIN CONTENT -->
<div class="main-content">

  <!-- Page Header -->
  <div class="page-header">
    <div class="header-divider"><span>â˜½</span></div>
    <h1>Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ø¹Ø§Øª Ù„Ù„Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„ÙƒØ¨Ø§Ø± ÙÙŠ Ø±Ù…Ø¶Ø§Ù†</h1>
    <p>Ø±Ù…Ø¶Ø§Ù† ÙØ±ØµØ© Ù„ØªØ²ÙƒÙŠØ© Ø§Ù„Ù†ÙØ³ ğŸŒ¿</p>
    <div class="header-divider"><span>â˜½</span></div>
  </div>

  <!-- Stats Bar -->
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-num" id="totalChecked">0</div>
      <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ù†Ø¬Ø²Ø©</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" id="daysCompleted">0</div>
      <div class="stat-label">Ø£ÙŠØ§Ù… Ù…ÙƒØªÙ…Ù„Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</div>
    </div>
    <div class="stat-card">
      <div class="stat-num" id="currentDay">-</div>
      <div class="stat-label">Ø£Ø¹Ù„Ù‰ ÙŠÙˆÙ… Ù…ØªÙˆØ§ØµÙ„</div>
    </div>
    <div class="stat-card" style="border-top-color: var(--gold);">
      <div class="stat-num" id="pctComplete">0%</div>
      <div class="stat-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</div>
    </div>
  </div>

  <!-- TABLE -->
  <div class="table-container">
    <table id="mainTable">
      <thead>
        <tr>
          <th class="col-date">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
          <th><span class="icon">ğŸ½ï¸</span>Ø§Ù„ØµÙˆÙ…</th>
          <th><span class="icon">ğŸ¤²</span>Ø£Ø¯Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©</th>
          <th><span class="icon">ğŸŒ…</span>Ø¯Ø¹Ø§Ø¡ Ù‚Ø¨Ù„ Ø§Ù„Ø£Ø·Ø§Ø±</th>
          <th><span class="icon">ğŸ“–</span>ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†</th>
          <th><span class="icon">ğŸ“š</span>Ù‚Ø±Ø§Ø¡Ø© Ø­Ø¯ÙŠØ«</th>
          <th><span class="icon">ğŸ“•</span>Ù‚Ø±Ø§Ø¡Ø© Ù‚ØµØ© Ù…ÙÙŠØ¯Ø©</th>
          <th><span class="icon">ğŸ“</span>Ø£Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©</th>
          <th><span class="icon">ğŸ¤</span>Ù…Ø³Ø§Ø¹Ø¯Ø© Ø£Ù‡Ù„ÙŠ</th>
          <th><span class="icon">âš½</span>Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ù„Ø±ÙŠØ§Ø¶Ø©</th>
          <th><span class="icon">ğŸ’°</span>ØµØ¯Ù‚Ø© ÙŠÙˆÙ…ÙŠØ©</th>
          <th><span class="icon">ğŸ•Œ</span>Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù…Ø³Ø¬Ø¯</th>
          <th><span class="icon">ğŸ—£ï¸</span>Ù‚ÙˆÙ„ ÙƒÙ„Ù…Ø© Ø·ÙŠØ¨Ø©</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

  <div class="footer">
    Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ø¹Ø§Øª ÙÙŠ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ ğŸŒ™ â€” Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù† ÙˆØªÙ‚Ø¨Ù„ Ù…Ù†Ø§
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
  const COLS = 12; // number of task columns
  const TOTAL = 30 * COLS;

  // Generate a unique key per device/browser so data is saved per device
  function getDeviceKey() {
    let key = localStorage.getItem('device_uid');
    if (!key) {
      key = 'dev_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
      localStorage.setItem('device_uid', key);
    }
    return key;
  }
  const DEVICE_KEY = getDeviceKey();

  function cbKey(day, col) { return `${DEVICE_KEY}_cb-${day}-${col}`; }

  const sections = [
    { label: 'Ø£ÙŠØ§Ù… Ø§Ù„Ø±Ø­Ù…Ø© (Ø§Ù„Ø£ÙŠØ§Ù… Ù¡ - Ù¡Ù )', color: '#52B788', days: [1,10], cls: 'mercy-row' },
    { label: 'Ø£ÙŠØ§Ù… Ø§Ù„Ù…ØºÙØ±Ø© (Ø§Ù„Ø£ÙŠØ§Ù… Ù¡Ù¡ - Ù¢Ù )', color: '#C9A84C', days: [11,20], cls: 'forgiveness-row' },
    { label: 'Ø£ÙŠØ§Ù… Ø§Ù„Ø¹ØªÙ‚ Ù…Ù† Ø§Ù„Ù†Ø§Ø± (Ø§Ù„Ø£ÙŠØ§Ù… Ù¢Ù¡ - Ù£Ù )', color: '#E88D67', days: [21,30], cls: 'freedom-row' },
  ];

  function getSectionForDay(d) {
    if (d <= 10) return sections[0];
    if (d <= 20) return sections[1];
    return sections[2];
  }

  function buildTable() {
    const body = document.getElementById('tableBody');
    let currentSection = null;

    for (let day = 1; day <= 30; day++) {
      const sec = getSectionForDay(day);
      if (sec !== currentSection) {
        currentSection = sec;
        const secRow = document.createElement('tr');
        secRow.className = 'section-row';
        const td = document.createElement('td');
        td.colSpan = COLS + 1;
        td.textContent = sec.label;
        td.style.background = `linear-gradient(135deg, ${sec.color}88, ${sec.color}55)`;
        td.style.color = '#1B4332';
        secRow.appendChild(td);
        body.appendChild(secRow);
      }

      const tr = document.createElement('tr');
      tr.className = sec.cls;
      tr.id = `row-${day}`;

      // Day number cell
      const dayTd = document.createElement('td');
      dayTd.innerHTML = `<span class="day-num">${day}</span>`;
      tr.appendChild(dayTd);

      // Checkbox cells
      for (let col = 0; col < COLS; col++) {
        const td = document.createElement('td');
        td.className = 'check-cell';
        const cb = document.createElement('input');
        cb.type = 'checkbox';
        cb.id = `cb-${day}-${col}`;
        cb.dataset.day = day;
        cb.dataset.col = col;

        // Load saved state
        if (localStorage.getItem(cbKey(day, col)) === '1') cb.checked = true;

        cb.addEventListener('change', () => {
          localStorage.setItem(cbKey(day, col), cb.checked ? '1' : '0');
          updateStats();
          checkDayComplete(day);
        });
        td.appendChild(cb);
        tr.appendChild(td);
      }

      body.appendChild(tr);
    }
  }

  function updateStats() {
    let total = 0, fullDays = 0, streak = 0, maxStreak = 0;

    for (let day = 1; day <= 30; day++) {
      let dayCount = 0;
      for (let col = 0; col < COLS; col++) {
        const cb = document.getElementById(`cb-${day}-${col}`);
        if (cb && cb.checked) { dayCount++; total++; }
      }
      if (dayCount === COLS) {
        fullDays++;
        streak++;
        maxStreak = Math.max(maxStreak, streak);
      } else {
        streak = 0;
      }
    }

    document.getElementById('totalChecked').textContent = total;
    document.getElementById('daysCompleted').textContent = fullDays;
    document.getElementById('currentDay').textContent = maxStreak;
    document.getElementById('pctComplete').textContent = Math.round(total / TOTAL * 100) + '%';
  }

  function checkDayComplete(day) {
    let count = 0;
    for (let col = 0; col < COLS; col++) {
      const cb = document.getElementById(`cb-${day}-${col}`);
      if (cb && cb.checked) count++;
    }
    const row = document.getElementById(`row-${day}`);
    if (count === COLS) {
      row.style.background = 'rgba(82,183,136,0.2)';
      showToast(`ğŸ‰ Ù…Ø§Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡! Ø£ØªÙ…Ù…Øª ÙŠÙˆÙ… ${day} Ø¨Ø§Ù„ÙƒØ§Ù…Ù„!`);
    } else {
      row.style.background = '';
    }
  }

  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 3000);
  }

  function resetAll() {
    if (!confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ')) return;
    for (let day = 1; day <= 30; day++) {
      for (let col = 0; col < COLS; col++) {
        localStorage.removeItem(cbKey(day, col));
        const cb = document.getElementById(`cb-${day}-${col}`);
        if (cb) cb.checked = false;
        const row = document.getElementById(`row-${day}`);
        if (row) row.style.background = '';
      }
    }
    updateStats();
    showToast('âœ… ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¬Ø¯ÙˆÙ„');
  }

  // Sound
  const audio = document.getElementById('bgSound');

  // Play once on first interaction anywhere on page
  function startAudio() {
    audio.loop = false;
    audio.play().catch(() => {});
    document.removeEventListener('click', startAudio);
    document.removeEventListener('touchstart', startAudio);
    document.removeEventListener('keydown', startAudio);
  }
  document.addEventListener('click', startAudio);
  document.addEventListener('touchstart', startAudio);
  document.addEventListener('keydown', startAudio);

  function toggleSound() {
    const btn = document.getElementById('soundBtn');
    if (audio.paused) {
      audio.currentTime = 0;
      audio.play().catch(() => {});
      btn.textContent = 'ğŸ”Š';
      btn.classList.remove('muted');
    } else {
      audio.pause();
      btn.textContent = 'ğŸ”‡';
      btn.classList.add('muted');
    }
  }

  // Download PDF using browser print
  function downloadPDF() {
    window.print();
  }

  // Init
  buildTable();
  updateStats();

  // ===== VISITOR COUNTER =====
  // Uses a public free counter API (countapi.xyz) - works on any hosted site
  async function initVisitorCounter() {
    try {
      // Use countapi.xyz - free, no signup needed, just needs a unique namespace/key
      const response = await fetch('https://api.countapi.xyz/hit/ramadan-tracker-youssef/visits');
      if (response.ok) {
        const data = await response.json();
        const count = data.value || 1;
        document.getElementById('visitorCount').textContent = count.toLocaleString('ar-EG');
      } else {
        throw new Error('API error');
      }
    } catch(e) {
      // Fallback: estimate from localStorage across sessions
      try {
        const stored = parseInt(localStorage.getItem('global_visit_count') || '0') + 1;
        localStorage.setItem('global_visit_count', stored);
        document.getElementById('visitorCount').textContent = stored.toLocaleString('ar-EG') + '+';
      } catch(e2) {
        document.getElementById('visitorCount').textContent = 'â€”';
      }
    }
  }
  initVisitorCounter();

  // ===== SHARE =====
  function openShare() {
    const url = window.location.href;
    document.getElementById('shareUrl').value = url;
    const msg = encodeURIComponent('Ø¬Ø¯ÙˆÙ„ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ø§Ø¹Ø§Øª ÙÙŠ Ø±Ù…Ø¶Ø§Ù† ğŸŒ™ â€” Ø£Ø¯Ø§Ø© Ø±Ø§Ø¦Ø¹Ø© Ù„Ù„Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„ÙƒØ¨Ø§Ø± Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª ÙŠÙˆÙ…ÙŠØ§Ù‹ØŒ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ø§Ø¡ Ù„Ù„Ø´Ù‡ÙŠØ¯ ÙŠÙˆØ³Ù Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…ÙˆØ¯ ğŸ¤²');
    const encodedUrl = encodeURIComponent(url);
    document.getElementById('waShare').href = `https://wa.me/?text=${msg}%20${encodedUrl}`;
    document.getElementById('fbShare').href = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`;
    document.getElementById('twShare').href = `https://twitter.com/intent/tweet?text=${msg}&url=${encodedUrl}`;
    document.getElementById('tgShare').href = `https://t.me/share/url?url=${encodedUrl}&text=${msg}`;
    document.getElementById('shareModal').classList.add('open');
  }

  function closeShare() {
    document.getElementById('shareModal').classList.remove('open');
  }

  function closeShareOutside(e) {
    if (e.target === document.getElementById('shareModal')) closeShare();
  }

  function copyLink() {
    const input = document.getElementById('shareUrl');
    input.select();
    navigator.clipboard.writeText(input.value).then(() => {
      showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
      closeShare();
    }).catch(() => {
      document.execCommand('copy');
      showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·!');
      closeShare();
    });
  }
</script>
</body>
</html>
